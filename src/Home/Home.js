import React, { useState } from "react";
import { MapContainer, Marker, TileLayer, Popup, Polyline } from "react-leaflet";
import { Icon } from "leaflet";
import "./Home.css";
import ReactLeafletDriftMarker from "react-leaflet-drift-marker"
import CarIcon from "./CarIcon/CarIcon";
import Avatar from "../Images/avatar.jpeg"

const srhMarkerIcon = new Icon({
    iconUrl: require("../Images/SRH_Icon.png"),
    iconSize: [45, 38]
  })


const Home = () => {
	const [car1Position, setCar1Position] = useState([49.409684, 8.660309]);
	const [car1Direction, setCar1Direction] = useState("east");
	
	const [car2Position, setCar2Position] = useState([49.404036, 8.677261]);
	const [car2Direction, setCar2Direction] = useState("west");

	//const [pathLine, setPathLine] = useState([[49.408365, 8.665114], [49.408104, 8.66912], [49.409165, 8.669863], [49.408839, 8.672959]]);
	const [pathLine, setPathLine] = useState([[ 49.40408 , 8.67641 ], [ 49.40409 , 8.67642 ], [ 49.4041 , 8.67643 ], [ 49.40411 , 8.67646 ], [ 49.40412 , 8.6765 ], [ 49.40413 , 8.67667 ], [ 49.40413 , 8.67684 ], [ 49.40411 , 8.67705 ], [ 49.40411 , 8.67721 ], [ 49.4041 , 8.67744 ], [ 49.40417 , 8.67783 ], [ 49.40426 , 8.67829 ], [ 49.40431 , 8.67868 ], [ 49.40439 , 8.67896 ], [ 49.40445 , 8.67914 ], [ 49.40447 , 8.67927 ], [ 49.40465 , 8.68069 ], [ 49.40476 , 8.68126 ], [ 49.40486 , 8.68175 ], [ 49.4052 , 8.68359 ], [ 49.40524 , 8.68383 ], [ 49.40524 , 8.68394 ], [ 49.40524 , 8.68401 ], [ 49.40522 , 8.68406 ], [ 49.40519 , 8.68413 ], [ 49.40518 , 8.68421 ], [ 49.40515 , 8.6843 ], [ 49.40515 , 8.68439 ], [ 49.40515 , 8.68446 ], [ 49.40516 , 8.68461 ], [ 49.40521 , 8.68472 ], [ 49.40527 , 8.68485 ], [ 49.40535 , 8.68497 ], [ 49.40542 , 8.68503 ], [ 49.40549 , 8.68508 ], [ 49.40557 , 8.68511 ], [ 49.40563 , 8.68511 ], [ 49.4057 , 8.68509 ], [ 49.40577 , 8.68503 ], [ 49.40582 , 8.68496 ], [ 49.40583 , 8.68494 ], [ 49.40588 , 8.68474 ], [ 49.40588 , 8.68465 ], [ 49.40586 , 8.68458 ], [ 49.40584 , 8.68452 ], [ 49.4058 , 8.68439 ], [ 49.40574 , 8.68424 ], [ 49.40555 , 8.68307 ], [ 49.40523 , 8.68136 ]]);
	const [pathLine2, setPathLine2] = useState([[ 49.40408 , 8.67641 ], [ 49.40409 , 8.67642 ], [ 49.4041 , 8.67643 ], [ 49.40411 , 8.67646 ], [ 49.40412 , 8.6765 ], [ 49.40413 , 8.67667 ], [ 49.40413 , 8.67684 ], [ 49.40411 , 8.67705 ], [ 49.40411 , 8.67721 ], [ 49.4041 , 8.67744 ], [ 49.40431 , 8.67728 ], [ 49.40449 , 8.6772 ], [ 49.40454 , 8.67717 ], [ 49.40459 , 8.67714 ], [ 49.40464 , 8.67713 ], [ 49.40474 , 8.6771 ], [ 49.40489 , 8.67706 ], [ 49.40499 , 8.67703 ], [ 49.40536 , 8.67703 ], [ 49.40552 , 8.67702 ], [ 49.40559 , 8.67701 ], [ 49.40562 , 8.67701 ], [ 49.40566 , 8.67699 ], [ 49.40612 , 8.67696 ], [ 49.40772 , 8.67689 ], [ 49.40783 , 8.67691 ], [ 49.40791 , 8.67689 ], [ 49.40796 , 8.67689 ], [ 49.40842 , 8.67687 ], [ 49.40889 , 8.67688 ], [ 49.40888 , 8.67746 ], [ 49.40887 , 8.67783 ], [ 49.40887 , 8.67805 ], [ 49.40891 , 8.67823 ], [ 49.40901 , 8.67838 ], [ 49.40911 , 8.67846 ], [ 49.40918 , 8.6785 ], [ 49.40924 , 8.67852 ], [ 49.40925 , 8.67852 ], [ 49.40942 , 8.67854 ], [ 49.40951 , 8.67854 ], [ 49.40957 , 8.67852 ], [ 49.40958 , 8.67851 ], [ 49.40964 , 8.67851 ], [ 49.40974 , 8.67849 ], [ 49.4098 , 8.67848 ], [ 49.40979 , 8.67837 ], [ 49.40978 , 8.6779 ], [ 49.40977 , 8.67745 ], [ 49.40977 , 8.67731 ], [ 49.40976 , 8.67703 ], [ 49.40976 , 8.67675 ], [ 49.40975 , 8.67654 ], [ 49.40975 , 8.67648 ], [ 49.40975 , 8.6764 ], [ 49.40975 , 8.6763 ], [ 49.40974 , 8.67616 ], [ 49.40972 , 8.67602 ], [ 49.4097 , 8.67591 ], [ 49.40965 , 8.67574 ], [ 49.40963 , 8.67568 ], [ 49.4096 , 8.67559 ], [ 49.40952 , 8.67542 ], [ 49.40949 , 8.67537 ], [ 49.40942 , 8.67527 ], [ 49.40918 , 8.67493 ], [ 49.40904 , 8.67466 ], [ 49.409 , 8.67457 ], [ 49.40894 , 8.67438 ], [ 49.40889 , 8.67418 ], [ 49.40888 , 8.67409 ], [ 49.40886 , 8.67384 ], [ 49.40886 , 8.67373 ], [ 49.40886 , 8.67293 ], [ 49.40887 , 8.67256 ], [ 49.4089 , 8.67191 ], [ 49.40894 , 8.67151 ], [ 49.40906 , 8.67074 ], [ 49.40906 , 8.67071 ], [ 49.40912 , 8.67034 ], [ 49.40919 , 8.6699 ], [ 49.40921 , 8.66981 ], [ 49.40924 , 8.66964 ], [ 49.40929 , 8.66929 ], [ 49.40931 , 8.6691 ], [ 49.40938 , 8.66866 ], [ 49.40943 , 8.66831 ], [ 49.40945 , 8.66819 ], [ 49.40947 , 8.66776 ], [ 49.40949 , 8.66762 ], [ 49.40969 , 8.66642 ], [ 49.40973 , 8.66634 ], [ 49.40981 , 8.66583 ], [ 49.40996 , 8.66521 ], [ 49.41011 , 8.66435 ], [ 49.41014 , 8.66413 ], [ 49.41018 , 8.66391 ], [ 49.41021 , 8.66376 ], [ 49.41024 , 8.66358 ], [ 49.41029 , 8.6634 ], [ 49.41034 , 8.6632 ], [ 49.41038 , 8.66304 ], [ 49.41039 , 8.66299 ], [ 49.41042 , 8.66289 ], [ 49.41054 , 8.66253 ], [ 49.41055 , 8.6625 ], [ 49.41055 , 8.66249 ], [ 49.41075 , 8.66193 ], [ 49.41092 , 8.6614 ], [ 49.4111 , 8.66087 ], [ 49.4113 , 8.6603 ], [ 49.41131 , 8.66029 ], [ 49.41132 , 8.66026 ], [ 49.4114 , 8.66007 ], [ 49.41145 , 8.65995 ], [ 49.41155 , 8.6597 ], [ 49.4116 , 8.6596 ], [ 49.41181 , 8.65915 ], [ 49.41192 , 8.65893 ], [ 49.41209 , 8.65863 ], [ 49.41241 , 8.65811 ], [ 49.41249 , 8.65797 ], [ 49.41253 , 8.65791 ], [ 49.4127 , 8.65764 ], [ 49.41293 , 8.65726 ], [ 49.41385 , 8.65389 ], [ 49.41381 , 8.65355 ], [ 49.41379 , 8.65316 ], [ 49.41374 , 8.65221 ], [ 49.4137 , 8.65107 ]]);
	
	
    return (
		<div className="homeContainer">
			<div className="userDetailsRow">
				<div style={{display: "flex", flexDirection: "column"}}>
					<p className="f fSmall fLight">Good Morning</p>
					<p className="f fMedium fLight">Harold</p>
				</div>
				<img className="avatar" src={Avatar} />
			</div>
			<div className="topRow">
				<p>Top Row</p>
			</div>
			<MapContainer center={[49.4043, 8.6758]} zoom={14}>
				<TileLayer
				attribution='&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors'
				url="https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png"
				// url="https://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}{r}.png"
				// url="https://tiles.stadiamaps.com/tiles/alidade_smooth/{z}/{x}/{y}{r}.png"
				// url="https://tiles.stadiamaps.com/tiles/alidade_smooth_dark/{z}/{x}/{y}{r}.png"
				// url="https://{s}.tile.openstreetmap.de/{z}/{x}/{y}.png"
				
				/>
				<Marker
					position={[49.4139, 8.6511]}
					icon={srhMarkerIcon}
					data={{key: "value"}}
					eventHandlers={{
					click: (e) => {
						console.log(e.target.options.data);  // console log contents of data
						setCar1Position([49.410270, 8.657739])
						setCar1Direction("northwest")
						setCar2Position([49.402713, 8.678520])
					},
					}}>
						<Popup><p>I go here!</p></Popup>
				</Marker>
				<CarIcon 
					position={car1Position} 
					duration={1000}
					direction={car1Direction} 
					data={{hi:"there"}} 
					message={"box to overtake"}/>
				
				
				<CarIcon 
					position={car2Position} 
					duration={1000}
					direction={car2Direction} 
					data={{hi:"there"}} 
					message={"box to overtake"}/>
				
				<Polyline positions={pathLine} color={'#ff000054'} />
				<Polyline positions={pathLine2} color={'#ff000054'} />
			</MapContainer>
		</div>
	);
}

export default Home;